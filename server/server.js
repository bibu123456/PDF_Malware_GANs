const http = require('http');
const url = require('url');

const server = http.createServer((req, res) => {
    const parsedUrl = url.parse(req.url, true);
    console.log('Requested URL:', parsedUrl.pathname);

    let body = '';

    req.on('data', chunk => {
        body += chunk.toString(); // convert Buffer to string
    });

    req.on('end', () => {
        let fullRequest = `${req.method} ${req.url} HTTP/${req.httpVersion}\n`;

        for (let header in req.headers) {
            fullRequest += `${header}: ${req.headers[header]}\n`;
        }

        fullRequest += `\n${body}`;

        console.log('Full request:\n', fullRequest);

        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end(`
            <html>
            <head>
                <title>Login Success</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        background-color: #f4f4f4;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        height: 100vh;
                        margin: 0;
                    }
                    .container {
                        background: #fff;
                        padding: 20px 30px;
                        border-radius: 10px;
                        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                        text-align: center;
                    }
                    .container h1 {
                        color: #4CAF50;
                    }
                    .container p {
                        font-size: 18px;
                        color: #333;
                    }
                    .container .welcome {
                        font-size: 24px;
                        margin: 20px 0;
                    }
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Login Successful</h1>
                    <div class="welcome">Welcome!</div>
                    <p>You have successfully logged in.</p>
                </div>
            </body>
            </html>
        `);
    });
});

const PORT = 3000; // Thay đổi port nếu cần thiết

server.listen(PORT, () => {
    console.log(`Server is listening on port ${PORT}`);
});
